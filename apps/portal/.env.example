# ===========================================
# Nimble Portal Environment Configuration
# ===========================================

# Supabase Configuration
# ----------------------
# Get these values from your Supabase project dashboard:
# 1. Go to https://supabase.com/dashboard
# 2. Select your project
# 3. Navigate to Settings > API
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key_here

# JWT RSA Keys for Authentication (RS256)
# ========================================
# The portal uses asymmetric RSA keys for JWT signing/verification.
# - Portal signs JWTs with PRIVATE key (kept secret)
# - Vault verifies JWTs with PUBLIC key (can be safely exposed)
#
# Step 1: Generate RSA key pair
# -----------------------------
# openssl genrsa -out private.pem 2048
# openssl rsa -in private.pem -pubout -out public.pem
#
# Step 2: Format for environment variables
# ----------------------------------------
# echo "NIMBLE_JWT_PRIVATE_KEY=\"$(cat private.pem | sed ':a;N;$!ba;s/\n/\\n/g')\""
# echo "NIMBLE_JWT_PUBLIC_KEY=\"$(cat public.pem | sed ':a;N;$!ba;s/\n/\\n/g')\""
#
# Step 3: Auto-generate and update .env (run from apps/portal/)
# -------------------------------------------------------------
# ./scripts/generate-jwt-keys.sh
#
NIMBLE_JWT_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\nMIIEpAIBAAKCAQEA...\n-----END RSA PRIVATE KEY-----"
NIMBLE_JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA...\n-----END PUBLIC KEY-----"

# Deployment URL Configuration
# ----------------------------
# This URL is used for OAuth redirects and API callbacks.
# 
# Development: http://localhost:4000
# Production: https://nimble.game (or your custom domain)
NEXT_PUBLIC_SITE_URL=http://localhost:4000

# Cookie Domain Configuration
# ---------------------------
# Domain for setting authentication cookies. Should start with a dot for subdomains.
# 
# Development: Automatically uses 'localhost'
# Production: Set to your domain (e.g., '.nimble.game' or '.yourdomain.com')
COOKIE_DOMAIN=.nimble.game

# Optional: Database Configuration
# --------------------------------
# If using Supabase database features beyond auth, configure these:
# (Most portal features only need the auth configuration above)
# 
# DATABASE_URL=postgresql://postgres:[password]@db.[project-id].supabase.co:5432/postgres

# External App URLs (for production rewrites)
# -------------------------------------------
# Development uses localhost ports, production uses these URLs for Vercel rewrites.
# Configure these to point to your deployed sub-applications.
# 
# Development behavior:
# - Vault: http://localhost:4321
# - Characters: http://localhost:3000 (when implemented)
# - Dice: http://localhost:3002 (when implemented)
# 
# Production behavior (via vercel.json rewrites):
# - /vault/* -> VAULT_APP_URL/*
# - /characters/* -> CHARACTERS_APP_URL/*
# - /dice/* -> DICE_APP_URL/*
VAULT_APP_URL=https://nimble-vault.vercel.app
CHARACTERS_APP_URL=https://nimble-characters.vercel.app
DICE_APP_URL=https://nimble-dice.vercel.app

# Optional: Third-party Integration Secrets
# -----------------------------------------
# These will be added as OAuth providers are implemented:
# 
# DISCORD_CLIENT_ID=your_discord_client_id
# DISCORD_CLIENT_SECRET=your_discord_client_secret
# 
# PATREON_CLIENT_ID=your_patreon_client_id  
# PATREON_CLIENT_SECRET=your_patreon_client_secret